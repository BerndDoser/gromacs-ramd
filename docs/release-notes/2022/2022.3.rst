GROMACS 2022.3 release notes
----------------------------

This version was released on TODO, 2022. These release notes
document the changes that have taken place in GROMACS since the
previous 2022.2 version, to fix known issues. It also incorporates all
fixes made in version 2021.6 and earlier, which you can find described
in the :ref:`release-notes`.

.. Note to developers!
   Please use """"""" to underline the individual entries for fixed issues in the subfolders,
   otherwise the formatting on the webpage is messed up.
   Also, please use the syntax :issue:`number` to reference issues on GitLab, without the
   a space between the colon and number!

Fixes where mdrun could behave incorrectly
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Energy minimization would not converge with GPU and without DD
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

The steepest descent and conjugate gradient minimizers would not converge
when using a GPU for the nonbonded interactions and not using domain
decomposition.

:issue:`4533`

Fixes for ``gmx`` tools
^^^^^^^^^^^^^^^^^^^^^^^

Fixes that affect portability
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Further fix to nvcc flag detection
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Version 2022.1 fixed a nvcc flag detection issue for gcc version 11,
but this fix resulted in issues for older gcc versions. Version 2022.2
resolved this for gcc version 7, but issues remained for other gcc
versions. This release provides a fix that should prevent this issue
for all gcc versions.

:issue:`4539`

Miscellaneous
^^^^^^^^^^^^^

Improve mdrun log file energy output formatting
"""""""""""""""""""""""""""""""""""""""""""""""

The mdrun log file now prints more energy-field names in abbreviated
forms so as to avoid exceeding the maximum column lengths available.

Improve warning message about AVX_128_FMA SIMD
""""""""""""""""""""""""""""""""""""""""""""""

This instruction set only works on early AMD CPUs that support their
FMA4 extensions. Since Zen1, AMD has instead moved to support FMA3
(similar to Intel hardware), which unfortunately means SIMD instruction
sets are NOT incremental. We now detect this for parallel runs and stick
to vanilla 256-bit AVX, and properly detect when the FMA4 instruction
set is used on non-compatible hardware and warn why the run is likely to
crash. To clarify, we have also changed the string to AVX_128_FMA4.

:issue:`4526`
